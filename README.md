# Тестовое задание

### Сборка проекта

Если используется docker и docker-compose:
1. `cd prh-test_task`
2. `./build_dev.sh`
3. В браузере открыть: [127.0.0.1:25080](http://127.0.0.1:25080). Если необходимо, порт можно изменить в переменной `APP_HTTP_MAP_PORT`, файла `./.env`

иначе:
1. `cd prh-test_task/app`
2. `composer install --no-interaction`
3. `./init --env=Development --overwrite=All --delete=All`
4. Прописать параметры подключения к БД в `common/config/main-local.php`
5. `./yii migrate --interactive=0`
6. `./yii fixture '*' --namespace='common\fixtures' --interactive=0`

### Аутентификация
Если фикстуры загружены, то залогиниться можно по кредам: **admin/admin**

### Ответы на возможные вопросы

**Q.** Как уменьшить время свежести яблок?  
**A.** Переопределить параметр `apple.freshnessTime` в `backend/config/params-local.php` (См. `backend/config/params.php`).  

**Q.** Почему для реализации задачи используется конечный автомат?  
**A.** Постановка задачи намекает на то, что логика процесса работы с яблоком может усложняться бесконечно.
Если для ее реализации использовать привычный подход из if-ов, то в какой-то момент ее уже будет невозможно поддерживать и расширять из-за месива условий и состояний.
Описание процесса через конечный автомат позволяет лучше видеть и понимать варианты переходов (и их условия) между состояниями,
что дает возможность более эффективно расширять и поддерживать логику.  

**Q.** Почему везде используется DI? Разве не проще обратиться к сервис-локатору?  
**A.** Проще, но так делать не нужно.
Если нам потребуется заменить одну реализацию класса на другую в одном из мест приложения, то из-за сервис-локатора мы этого сделать не сможем,
так как для резолвинга объекта в сервис-локаторе используется глобальная пара алиас-класс. Если алиас переопределить другой реализацией, то это переопределение затронет все приложение, а не конкретную область.